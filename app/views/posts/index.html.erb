<% require_relative './time_helper' %>


<%= link_to "Log out", logout_path, method: :delete %>
<p> Morning <%= current_user.firstname %></p>

<center><h1> Angels </h1>

<% @posts.reverse.each do |post| %>
  <p><%= simple_format(post.message) %></p>
  <div class="container">
          <!-- Button trigger modal -->
      <a href="#" role="button" class="btn" data-toggle="modal" data-target="#<%=post.id%>ModalCenter">
        read
      <a>

      <!-- Modal -->
      <div class="modal fade" id="<%=post.id%>ModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLongTitle">Modal title</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              <%= post.message %>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
              <button type="button" class="btn btn-primary">Save changes</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  <%= "Created: #{time_since_post(post)}" %>
  <% if current_user == (post.user) && post.less_than_10_minutes_ago %>
  <br>
    <%= link_to 'Edit', edit_post_path(post) %>
  <% end %>
  <% if current_user == (post.user) %>
  <%= link_to 'Delete', post_path(post), method: :delete, data: { confirm: "Are you sure?"} %>
  <%end%>
<%end%>
<br>
<%= link_to new_post_path do %>
  New post
<% end %>
